# 调度器

Nomad有三种调度类型：service、batch和system。

## Service

Servcie调度器适用于常驻的服务。service调度器将符合job运行条件的node进行排序，挑选最优的node运行task group。service调度器使用一个最合适的计分算法，这个算法是受谷歌Borg的启发。对大量的适配node进行排序使调度时间增加，但是使调度结果更优。如果job异常退出会根据重启和重新调整策略进行处理。

## Batch

Batch调度器对短期性能波动敏感度低得多，并且寿命短，可以在几分钟到几天内完成。尽管batch 调度程序与调度程序非常相似service，但是它对批处理工作负载进行了某些优化。主要区别在于，在找到满足作业约束的节点集之后，它使用Berkeley的Sparrow调度程序中描述的两种选择的功效来限制被排序的节点数量。

批处理作业将一直运行直到成功退出。错误退出的批处理任务将根据作业的重新启动和重新安排 节进行处理。

## System

该system调度用于注册，应该在符合job的约束所有的客户端运行的作业。在system当客户端加入群集或过渡到就绪状态调度也调用。这意味着system如果满足约束，将重新评估所有注册的job，并将其任务放置在新可用的节点上。

此调度程序类型对于部署和管理群集中每个节点上应该存在的task非常有用。由于这些task由Nomad管理，因此可以利用job更新，服务发现等优势。

从Nomad 0.9开始，如果没有足够的容量来放置系统job，则系统调度程序将抢占在节点上运行的合格的低优先级task。有关如何选择被抢占的task的详细信息，请参见抢占。

系统task应一直运行，直到被操作员或抢占明确停止为止。如果系统task退出，则视为失败，并根据task的重新启动策略进行处理；系统作业没有重新计划。
