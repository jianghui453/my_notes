如果锁已经被占用则进入自旋，在一小段的自旋时间里如果没有获得锁则进入等待队列，等待被唤醒。