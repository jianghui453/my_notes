# tcp 粘包和拆包

## 粘包问题的解决策略

由于底层的TCP无法理解上层的业务数据，所以在底层是无法保证数据包不被拆分和重组的，这个问题只能通过上层的应用协议栈设计来解决，根据业界的主流协议的解决方案，可以归纳如下。

1. 消息定长，例如每个报文的大小为固定长度200字节，如果不够，空位补空格；
1. 在包尾增加回车换行符进行分割，例如FTP协议；
1. 将消息分为消息头和消息体，消息头中包含表示消息总长度（或者消息体长度）的字段，通常设计思路为消息头的第一个字段使用int32来表示消息的总长度；
1. 更复杂的应用层协议。

## 引用

1. [TCP粘包/拆包问题](https://www.cnblogs.com/wade-luffy/p/6165671.html)